<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ุงูุฑุฆูุณูุฉ โ ุฃูุฑู ุฌููุจุงู</title>
<link rel="stylesheet" href="/new-styles.css">
</head>
<body>
<nav class="navbar" id="navbar"></nav>
<div class="container">
    <div class="card">
        <div class="card-title">ูุฑุญุจุงูุ <span id="userName"></span></div>
        <p id="welcomeMsg" style="margin-bottom:20px;color:#555;"></p>
        <div class="tiles" id="tilesContainer"></div>
    </div>
</div>

<script src="/new-app.js"></script>
<script>
    const user = requireAuth();
    renderNavbar(user);
    document.getElementById('userName').textContent = user.name;
    document.getElementById('welcomeMsg').textContent = 'ุฃููุงู ุจู ูู ูุธุงู ุฃูุฑู ุฌููุจุงู. ุงุฎุชุฑ ุงููุณู ุงูููุงุณุจ:';

    const tiles = [];
    const r = user.role;

    if (Roles.isAdmin(r) || Roles.isGM(r)) {
        tiles.push({ href: '/new-admin-users.html',       icon: '๐ฅ', label: 'ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู',   cls: 'tile-admin' });
    }
    if (Roles.isAdmin(r) || Roles.isSales(r) || Roles.isGM(r)) {
        tiles.push({ href: '/new-sales-sheet.html',       icon: '๐', label: 'ุดูุช ุงููุจูุนุงุช',       cls: 'tile-sales' });
        tiles.push({ href: '/new-sales-report.html',      icon: '๐', label: 'ุชูุฑูุฑ ุงููุจูุนุงุช',     cls: 'tile-sales' });
    }
    if (Roles.isAdmin(r) || Roles.isProcurement(r) || Roles.isGM(r)) {
        tiles.push({ href: '/new-proc-sheet.html',        icon: '๐', label: 'ุดูุช ุงููุดุชุฑูุงุช',      cls: 'tile-proc' });
        tiles.push({ href: '/new-proc-report.html',       icon: '๐ฆ', label: 'ุชูุฑูุฑ ุงููุดุชุฑูุงุช',    cls: 'tile-proc' });
    }
    tiles.push({ href: '/new-materials.html',             icon: '๐งช', label: 'ูุงุฆูุฉ ุงูููุงุฏ',       cls: '' });
    tiles.push({ href: '/new-materials-approvals.html',   icon: 'โ', label: 'ุงุนุชูุงุฏุงุช ุงูููุงุฏ',    cls: '' });

    const container = document.getElementById('tilesContainer');
    container.innerHTML = tiles.map(t =>
        `<a class="tile ${t.cls}" href="${t.href}">
            <div class="tile-icon">${t.icon}</div>
            ${t.label}
        </a>`
    ).join('');
</script>
</body>
</html>
